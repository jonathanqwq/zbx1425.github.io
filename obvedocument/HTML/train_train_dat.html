<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">

<!-- Mirrored from www.trainsimframework.org/develop/train_train_dat.html by HTTrack Website Copier/3.x [XR&CO'2010], Sat, 05 May 2012 22:31:06 GMT -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<link rel="SHORTCUT ICON" href="../Images/favicon.png">
<meta name="keywords" content="openBVE,homepage">
<title>Train.dat文件格式</title>
<link rel="stylesheet" type="text/css" href="Why_dont_oBVE_development_team_use_css.css"></head>
<body style="font-family:sans-serif;font-size:small">
<font size="+2" color="#0080FF"><b>Train.dat</b>文件格式</font><br>
<br><br>
<font size="+1" color="#0080FF">■ 目录</font><hr>
<br>
↷ <a href="#overview">1. 概述</a><br>
↷ <a href="#identifier">2. 文件标识符</a><br>
&nbsp;&nbsp;&nbsp;&nbsp;↷ <a href="train_train_dat_version.html">2a. 标识符的历史版本</a><br>
↷ <a href="#syntax">3. 语法</a><br>
↷ <a href="#acceleration">4. Acceleration（加速）部分</a><br>
↷ <a href="#performance">5. Performance（性能）部分</a><br>
↷ <a href="#delay">6. Delay（延迟）部分</a><br>
↷ <a href="#move">7. Move（运动）部分</a><br>
↷ <a href="#brake">8. Brake（制动）部分</a><br>
↷ <a href="#pressure">9. Pressure（压力）部分</a><br>
↷ <a href="#handle">10. Handle（档位）部分</a><br>
↷ <a href="#cab">11. Cab（驾驶室）部分</a><br>
↷ <a href="#car">12. Car（车厢）部分</a><br>
↷ <a href="#device">13. Device（设备）部分</a><br>
↷ <a href="#motor">14. Motor（电机）部分</a><br>
<br><a name="overview"></a>
<br><br>
<font size="+1" color="#0080FF">■ 1.概述</font><hr>
<br>
Train.dat文件描述了车辆的特征，包括加速、制动行为，安装设备，速度-声音的关联等等。<br><br><br>
<table style="border:1px dotted;margin-left:20pt;margin-right:20pt;">
<tr><td bgcolor="#60A0FF" style="border:2px; border-style:ridge;"><font color="#FFFFFF">
<b>☀</b> 小贴士：Train Editor
</font></td></tr><tr><td bgcolor="#FFFFFF">
您可以使用<a href="tool_traineditor.html">Train Editor</a>更方便的编辑train.dat文件。此页面仍应作为参考。当然，如果需要，您也可以手动编辑train.dat。
</td></tr></table>
<br>
<br>该文件是以任意编码<a href="information_encodings.html">编码</a>的纯文本文件。但是，带字节顺序标记的UTF-8是首选。数字的<a href="information_numberformats.html">解析</a>是<b>松散的</b>，但是我们鼓励您生成<b>严格的</b>输出。该文件必须位于<a href="information_folderstructure.html">车辆文件夹</a>内，并且应命名为<b>train.dat</b>。该文件将从上到下逐行进行解析。<br><br><a name="identifier"></a>
<br><br>
<font size="+1" color="#0080FF">■ 2.文件标识符</font><hr>
<br>
Train.dat的第一行应该是指示文件版本的标识符。允许的值为：<br><br><span class="code">
<tt>BVE1200000<br>
BVE1210000</br>
BVE1220000</tt></span><br>
<br><span class="code">
<tt>BVE2000000<br>
OPENBVE</tt></span><br>
<br>从版本<b>1.5.3.3</b>开始，<em>OPENBVE</em>标识符可以选择下文所需的openBVE的最小版本号，例如
<span class="code">
<tt>OPENBVE1530</tt></span><br>
<br>任何其他值都将不受支持，并且将假定为2.0版本。选定的版本号会影响<b>#ACCELERATION</b>部分的解析，稍后会对此进行说明。<br><br><a name="syntax"></a>
<br><br>
<font size="+1" color="#0080FF">■ 3.语法</font><hr>
<br>
在文件的每行开头和结尾当中的<a href="information_whitespaces.html">空格</a>将被忽略。<br><br>标识符后面每一单独的行都可以被解释为新一部分的开头或是上一部分附属的数据。只由空格组成的行是<b>不会</b>被忽略的。<br><br>开启一个新的部分需要用到“#”（U+0023）。后面的文本表示该部分的名称，不区分大小写。因此，每部分的开头应按照下列格式书写：<br><br><span class="command">#NameOfTheSection</span><br>
<br>各部分在文件中出现的顺序无关紧要。某一部分开头之后的每一行都将被解释为该部分的数据。通常为每行一个值。这些数据条目都未命名，因此它们的顺序很重要。当程序期待一个数值但由于启动了新一部分而被省略时，将应用默认值。下文将介绍每部分及数据的确切解释以及默认值。<br><br>您可以在每一行的末尾添加注释，注释由“;”开始 (U+003B)。注释（如果存在）将在处理之前从文件中删除。<br><br><a name="acceleration"></a>
<br><br>
<font size="+1" color="#0080FF">■ 4. Acceleration部分</font><hr>
<br>
ACCELERATION部分定义了每个独立的加速档位（凹槽）所对应的加速功率特性。车辆中可用的档位数量可以在HANDLE部分中进行设置。对于每一档，应从第一档位的第一个数据开始编写。<br><br><span class="command">#ACCELERATION</span><br>
<span class="param">
这将开启Acceleration部分。（以下四个参数均为对于单独某个档位的设置）
</span><br>
<br><span class="command"><em>a<sub>0</sub></em>, <em>a<sub>1</sub></em>, <em>v<sub>1</sub></em>, <em>v<sub>2</sub></em>, <em>e</em></span><br>
<span class="param">
<em><b>a<sub>0</sub></b></em>：一个正浮点数，表示车辆在0 km/h时的加速度，单位为km/h/s。<br>
<em><b>a<sub>1</sub></b></em>：一个正浮点数，表示车辆在<em>v<sub>1</sub></em> km/h时的加速度，单位为kmm/h/s。<br>
<em><b>v<sub>1</sub></b></em>: A positive floating-point number representing a reference speed in km/h corresponding to <em>a<sub>1</sub></em>.<br>
<em><b>v<sub>2</sub></b></em>: A positive floating-point number representing a reference speed in km/h corresponding to <em>e</em>.<br>
<em><b>e</b></em>: A positive floating-point number representing an exponent. The behavior is different for version 1.22 and version 2.0 file formats.
</span><br>
This data entry consists of five comma-separated values. White spaces surrounding the values are ignored. The acceleration the motor cars can provide for the whole train (accounting for unpowered trailer cars) at a given speed is calculated as follows:<br><br>If the speed of the train is 0 km/h, <em>a<sub>0</sub></em> indicates the acceleration output.<br><br>If the speed of the train is between 0 km/h and <em>v<sub>1</sub></em>, the acceleration output is determined via the following formula:<br><table>
<tr>
<td width="16" valign="top"></td><td>
<font size="-1"><em>Acceleration between 0 km/h and <em>v<sub>1</sub></em>, where <em>x</em> is the current speed of the train in km/h:</em></font>
</td></tr><tr>
<td width="16" valign="top">ƒ</td><td bgcolor="#FFD8C0" style="border:1px dotted;">
<tt><em>a<sub>0</sub></em> + (<em>a<sub>1</sub></em> - <em>a<sub>0</sub></em>) * <em>x</em> / <em>v<sub>1</sub></em></tt></td>
</tr>
</table>
<br>If the speed of the train is <em>v<sub>1</sub></em>, the acceleration output is indicated by <em>a<sub>1</sub></em>.<br><br>If the speed of the train is between <em>v<sub>1</sub></em> and <em>v<sub>2</sub></em>, the acceleration output is determined via the following formula:<br><table>
<tr>
<td width="16" valign="top"></td><td>
<font size="-1"><em>Acceleration between <em>v<sub>1</sub></em> and <em>v<sub>2</sub></em>, where <em>x</em> is the current speed of the train in km/h:</em></font>
</td></tr><tr>
<td width="16" valign="top">ƒ</td><td bgcolor="#FFD8C0" style="border:1px dotted;">
<tt>v<sub>1</sub> * a<sub>1</sub> / x</tt></td>
</tr>
</table>
<br>If the speed of the train is greater than <em>v<sub>2</sub></em>, the acceleration output is determined via the following formula (for version 2.0 exponents):<br><table>
<tr>
<td width="16" valign="top"></td><td>
<font size="-1"><em><b>For version 2.0:</b> Acceleration above <em>v<sub>2</sub></em>, where <em>x</em> is the current speed of the train in km/h:</em></font>
</td></tr><tr>
<td width="16" valign="top">ƒ</td><td bgcolor="#FFD8C0" style="border:1px dotted;">
<tt>v<sub>1</sub> * a<sub>1</sub> * v<sub>2</sub><sup>e-1</sup> / x<sup>e</sup></tt></td>
</tr>
</table>
<br>For a version 1.22 file format, the exponent <em>e</em> is converted into a version 2.0 exponent according to the following equation (and then, the above formula applies):<br><table>
<tr>
<td width="16" valign="top"></td><td>
<font size="-1"><em>Converting a version 1.22 exponent into a version 2.0 exponent:</em></font>
</td></tr><tr>
<td width="16" valign="top">ƒ</td><td bgcolor="#FFD8C0" style="border:1px dotted;">
<tt>e<sub>2.0</sub> = min(1 - v<sub>2</sub> * log(e<sub>1.22</sub>) / log(9/4), 4)</tt></td>
</tr>
</table>
In the above formula, <em>log</em> denotes the natural logaritm and <em>min</em> the minimum function. Please notice that version 1.22 exponents are clamped at 4 after conversion to a 2.0 exponent.<br><br>Please take into account that the effective acceleration will always be lower than specified due to various resistances, including rolling resistance and air resistance.<br><br><span class="code">
<tt>#ACCELERATION<br>
0.77,0.39,7,7,1<br>
1.96,1.96,24,24,3<br>
1.96,1.96,52,52,3.4<br>
1.96,1.96,52,83,2.7</tt></span><br>
<br><a name="performance"></a>
<br><br>
<font size="+1" color="#0080FF">■ 5. Performance部分</font><hr>
<br>
This section defines the brake performance and coefficients which influence the physics.<br><br><span class="command">#PERFORMANCE</span><br>
<span class="param">
This starts the section.
</span><br>
<table bgcolor="#E0E0E0" style="border:0px none;margin-left:20pt;margin-right:10pt;">
<tr><td><font color="#C00000">☀</font></td><td><em>The following spelling variations can be used:&nbsp;</em></td></tr>
<tr><td></td><td><font color="#0060C0">#PERFORMANCE, DECELERATION</font></td></tr>
</table>
<br><span class="command"><em>Deceleration</em></span><br>
<br>
A non-negative floating-point number corresponding to the deceleration in km/h/s the service brakes can provide. The corresponding brake cylinder pressure can be defined in the #PRESSURE section. The default value is 1.<br><br><span class="command"><em>CoefficientOfStaticFriction</em></span><br>
<br>
A non-negative floating-point number corresponding to the coefficient of static friction, which plays an important role in wheel slip. The coefficient is dimensionless. Normal values for steel on steel range between 0.25 and 0.35. For rubber on steel, normal values range between 0.50 and 0.60. The default value is 0.35.<br><br><span class="commandlegacy"><em>Reserved</em></span><br>
<br>
<em>This value is not currently used by openBVE. Please set to 0.</em><br><br><span class="command"><em>CoefficientOfRollingResistance</em></span><br>
<br>
A non-negative floating-point number corresponding to the coefficient of rolling resistance, which plays an important role in the acceleration performance as it is one of the factors providing a resistance to the attempt of the train to accelerate. The coefficient is dimensionless. The default value is 0.0025.<br><br><span class="command"><em>AerodynamicDragCoefficient</em></span><br>
<br>
A non-negative floating-point number corresponding to the aerodynamic drag coefficient, which plays an important role in the acceleration performance as it is one of the factors providing a resistance to the attempt of the train to accelerate. The coefficient is dimensionless. The default value is 1.1.<br><br><span class="code">
<tt>#PERFORMANCE<br>
3.6<br>
0.35<br>
0<br>
0.0025<br>
1.1</tt></span><br>
<br><a name="delay"></a>
<br><br>
<font size="+1" color="#0080FF">■ 6. Delay部分</font><hr>
<br>
This section defines various delays associated with electric power and electric braking.<br><br><span class="command">#DELAY</span><br>
<span class="param">
This starts the section.
</span><br>
<br><span class="command"><em>DelayPowerUp</em></span><br>
<br>
A non-negative floating point number representing the time in <b>seconds</b> (s) before increasing the power notch takes effect. The default value is 0.<br><br><span class="command"><em>DelayPowerDown</em></span><br>
<br>
A non-negative floating point number representing the time in <b>seconds</b> (s) before decreasing the power notch takes effect. The default value is 0.<br><br><span class="command"><em>DelayBrakeUp</em></span><br>
<br>
A non-negative floating point number representing the time in <b>seconds</b> (s) before increasing the brake notch takes effect. Applies only to trains that have notched brakes. The default value is 0.<br><br><span class="command"><em>DelayBrakeDown</em></span><br>
<br>
A non-negative floating point number representing the time in <b>seconds</b> (s) before decreasing the brake notch takes effect. Applies only to trains that have notched brakes. The default value is 0.<br>
<br><br>
<table style="border:1px dashed;margin-left:0pt;margin-right:20pt;">
<tr><td bgcolor="#FFE080" style="border:2px; border-style:ridge;"><font color="#404040">
<b>ⓘ</b> Setting a delay for each notch
</font></td></tr><tr><td bgcolor="#FFFFFF">
From <b>V1.5.3.4</b> onwards, a comma separated list may be used for any of the above parameters, supplying the delay values from Notch 0 upwards. If this list is <em>shorter</em> than the total number of notches, the last value will be used for all subsequent notches.
</td></tr></table>
<br>

<span class="code">
<tt>#DELAY<br>
0.5<br>
0<br>
0.32<br>
0.32</tt></span><br>
<br><a name="move"></a>
<br><br>
<font size="+1" color="#0080FF">■ 7. Move部分</font><hr>
<br>
This section defines various jerk values associated with electric power and electric braking, as well as flow rates associated to the physical brake systems.<br><br><span class="command">#MOVE</span><br>
<span class="param">
This starts the section.
</span><br>
<br><span class="command"><em>JerkPowerUp</em></span><br>
<br>
A non-negative floating point number representing the jerk in <b>1/100 meters per second cubed</b> (1/100 m/s³) when the acceleration produced by the engine is increased. The default value is 1000.<br><br><span class="command"><em>JerkPowerDown</em></span><br>
<br>
A non-negative floating point number representing the jerk in <b>1/100 meters per second cubed</b> (1/100 m/s³) when the acceleration produced by the engine is decreased. The default value is 1000.<br><br><span class="command"><em>JerkBrakeUp</em></span><br>
<br>
A non-negative floating point number representing the jerk in <b>1/100 meters per second cubed</b> (1/100 m/s³) when the deceleration produced by the electric brake is increased. Applies only to trains that use the electric brake. The default value is 1000.<br><br><span class="command"><em>JerkBrakeDown</em></span><br>
<br>
A non-negative floating point number representing the jerk in <b>1/100 meters per second cubed</b> (1/100 m/s³) when the deceleration produced by the electric brake is decreased. Applies only to trains that use the electric brake. The default value is 1000.<br><br><span class="command"><em>BrakeCylinderUp</em></span><br>
<br>
A non-negative floating point number representing the mean pressure increase rate of the brake cylinder in <b>kilopascal per second</b> (kPa/s) when the pressure increases due to an emergency brake application. The default value is 300.<br><br>For a service brake application, a lower value than <em>BrakeCylinderUp</em> will be used.<br><br><span class="command"><em>BrakeCylinderDown</em></span><br>
<br>
A non-negative floating point number representing the mean pressure decrease rate of the brake cylinder in <b>kilopascal per second</b> (kPa/s) when the pressure decreases due to a brake release. The default value is 200.<br><br><span class="code">
<tt>#MOVE<br>
500<br>
3000<br>
3000<br>
500<br>
200<br>
160</tt></span><br>
<br><a name="brake"></a>
<br><br>
<font size="+1" color="#0080FF">■ 8. Brake部分</font><hr>
<br>
This section defines the brake type and other related settings.<br><br><span class="command">#BRAKE</span><br>
<span class="param">
This starts the section.
</span><br>
<br><span class="command"><em>BrakeType</em></span><br>
<br>
<span class="selectable">▸ Options for <em>BrakeType</em>:</span><br>
<span class="options">
<b>0</b>: Electromagnetic straight air brake<br>
<b>1</b>: Digital/analog electro-pneumatic air brake without brake pipe (electric command brake)<br>
<b>2</b>: Air brake with partial release feature
</span><br>
This entry defines which brake type to use. If set to <b>2</b>, the automatic air brake is used which uses a brake pipe across the whole train to supply each car with compressed air and to regulate the brake application. The brake pipe pressure needs time to propagate through the train, and thus, brake applications and releases are not synchonized between the cars. The train will always have separated power and brake handles, and thus, the <em>HandleType</em> entry inside the Handle section will be ignored.<br><br>If set to <b>0</b>, the electromagnetic straight air brake is used which is an enhancement to the automatic air brake. Contrary to the automatic air brake, the brake command is synchronized on all cars electrically, while the brake pipe is still used to distribute compressed air.<br><br>If set to <b>1</b>, the electric command brake is used which does not use the classical brake pipe altogether. Each car is an individual unit having its own brake equipment, while the brake command is synchronized electronically.<br><br><span class="command"><em>BrakeControlSystem</em></span><br>
<br>
<span class="selectable">▸ Options for <em>BrakeControlSystem</em>:</span><br>
<span class="options">
<b>0</b>: None<br>
<b>1</b>: Closing electromagnetic valve (lock-out valve) (締切電磁弁)<br>
<b>2</b>: Delay-including control (遅れ込め制御)
</span><br>
This entry defines which kind of brake control system to use. This setting only applies for the electromagnetic straight air brake and the electric command brake. With those brake systems, the motor of the train helps in braking a train (dynamic braking).<br><br>If <em>BrakeControlSystem</em> is set to <b>0</b> (none), the motor will always brake in addition to the physical brake, leading to a stronger braking force at all times.<br><br>With <b>1</b> (closing electromagnetic valve), the pressure to the brake cylinder is interrupted when the train travels above the brake control speed, and the electric brake is used instead. When below the control speed, the physical brake operates normally, while the electric brake is not used.<br><br>With <b>2</b> (delay-including control), the motor is used to brake the train with the deceleration setting as specified in the Performance section, and if the motor cannot provide this deceleration on its own, the physical brake is additionally used. When the train travels below the brake control speed, the physical brakes are used. However, as the physical brakes need time to fill the brake cylinder, the electric brake is still used to compensate for this delay.<br><br>The deceleration that is provided by the electric brake is calculated via the highest acceleration obtained via any of the acceleration curves in the #ACCELERATION section (let's call it <em>MaximumAcceleration</em>) and the service brake deceleration performance as defined in the #PERFORMANCE section (let's call it <em>Deceleration</em>) in the following way:<br><table>
<tr>
<td width="16" valign="top"></td><td>
<font size="-1"><em></em></font>
</td></tr><tr>
<td width="16" valign="top">ƒ</td><td bgcolor="#FFD8C0" style="border:1px dotted;">
<tt>0.5 * (<em>MaximumAcceleration</em> + <em>Deceleration</em>)</tt></td>
</tr>
</table>
<br><span class="command"><em>BrakeControlSpeed</em></span><br>
<br>
A non-negative floating-point number measured in <b>kilometers per hour</b> (km/h) at which the brake control system changes operation. The setting is ignored if <em>BrakeType</em> is set to <b>2</b> or if <em>BrakeControlSystem</em> is set to <b>0</b>. See the description for <em>BrakeControlSystem</em> for more information.<br><br><span class="code">
<tt>#BRAKE<br>
0<br>
1<br>
10</tt></span><br>
<br><a name="pressure"></a>
<br><br>
<font size="+1" color="#0080FF">■ 9. Pressure部分</font><hr>
<br>
This section defines various pressures for the train brake.<br><br><span class="command">#PRESSURE</span><br>
<span class="param">
This starts the section.
</span><br>
<br><span class="command"><em>BrakeCylinderServiceMaximumPressure</em></span><br>
<br>
A positive floating-point number measured in <b>kilopascal</b> (kPa) indicating the brake cylinder pressure corresponding to a full service brake application. The value is required to be less than or equal to <em>BrakeCylinderEmergencyMaximumPressure</em>. The default value is 480.<br><br><span class="command"><em>BrakeCylinderEmergencyMaximumPressure</em></span><br>
<br>
A positive floating-point number measured in <b>kilopascal</b> (kPa) indicating the brake cylinder pressure corresponding to an emergency brake application. The value is required to be greater than or equal to <em>BrakeCylinderServiceMaximumPressure</em>. The default value is 480.<br><br><span class="command"><em>MainReservoirMinimumPressure</em></span><br>
<br>
A positive floating-point number measured in <b>kilopascal</b> (kPa) indicating the pressure in the main reservoir at which the air compressor is activated until the maximum pressure is reached. The default value is 690.<br><br><span class="command"><em>MainReservoirMaximumPressure</em></span><br>
<br>
A positive floating-point number measured in <b>kilopascal</b> (kPa) indicating the pressure in the main reservoir at which the air compressor is deactivated. As a consequence, no pressure in either of the brake components can exceed this value. The default value is 780.<br><br><br>
<table style="border:1px dashed;margin-left:20pt;margin-right:20pt;">
<tr><td bgcolor="#FFE080" style="border:2px; border-style:ridge;"><font color="#404040">
<b>ⓘ</b> Brake cylinder and main reservoir
</font></td></tr><tr><td bgcolor="#FFFFFF">
Note that for all brake systems, the pressure in the brake cylinder can never exceed the highest pressure that can be produced in the main reservoir. As such, setting <em>BrakeCylinderEmergencyMaximumPressure</em> to a higher value than <em>MainReservoirMaximumPressure</em> will result in lower deceleration than set by <em>Deceleration</em> in the Pressure or Deceleration section. If <em>BrakeCylinderEmergencyMaximumPressure</em> is greater than <em>MainReservoirMinimumPressure</em>, there might not be enough pressure available in the main reservoir to obtain a full service or emergency brake application, and also, the brake cylinder might not be exhaused immediately with the automatic air brake and the electromagnetic straight air brake.
</td></tr></table>
<br>
<br><span class="command"><em>BrakePipeNormalPressure</em></span><br>
<br>
A positive floating-point number measured in <b>kilopascal</b> (kPa) indicating the normal pressure in the brake pipe. The default value is chosen to be somewhere between <em>BrakeCylinderEmergencyMaximumPressure</em> and <em>MainReservoirMinimumPressure</em>, ideally 490, if possible.<br><br><span class="code">
<tt>#PRESSURE<br>
440<br>
440<br>
690<br>
780<br>
490</tt></span><br>
<br><a name="handle"></a>
<br><br>
<font size="+1" color="#0080FF">■ 10. Handle部分</font><hr>
<br>
This section defines the type of the handle and the amount of power and brake notches.<br><br><span class="command">#HANDLE</span><br>
<span class="param">
This starts the section.
</span><br>
<br><span class="command"><em>HandleType</em></span><br>
<br>
<span class="selectable">▸ Options for <em>HandleType</em>:</span><br>
<span class="options">
<b>0</b>: Separate power and brake handles<br>
<b>1</b>: One combined power and brake handle
</span><br>
This entry defines which kind of handles should be used. If the train uses an automatic air brake (defined in the #BRAKE section), this setting will always be overridden to use two separate handles.<br><br><span class="command"><em>PowerNotches</em></span><br>
<br>
A non-negative integer indicating how many power notches are available. There should be as many entries in the #ACCELERATION section as indicated by <em>PowerNotches</em>.<br><br><span class="command"><em>BrakeNotches</em></span><br>
<br>
A non-negative integer indicating how many brake notches are available. The value is ignored for trains using automatic air brakes (defined in the #BRAKE section).<br><br><span class="command"><em>PowerNotchReduceSteps</em></span><br>
<br>
A non-negative integer indicating how many notches the power handle needs to be reduced before an actual change in the power notch setting internally occurs.<br><br>
<table style="border:1px dotted;margin-left:20pt;margin-right:20pt;">
<tr><td bgcolor="#60A0FF" style="border:2px; border-style:ridge;"><font color="#FFFFFF">
<b>☀</b> Frequently used application:
</font></td></tr><tr><td bgcolor="#FFFFFF">
If the value is set to <em>PowerNotches</em>, the driver needs to reset the power notch to neutral before the power is actually reduced. If the driver wanted to go from power notch P4 to power notch P3, it would be first required to move down to neutral. When going down from P4 over P3, P2 and P1, the internal power output will still resemble power notch P4 during that time. Only once the neutral position is reached will the power output be actually reduced to zero. The driver could then increase the power to P3 as initially desired.
</td></tr></table>
<br>
<br><span class="command"><em>EbHandleBehaviour</em></span><br>
<br>
<span class="selectable">▸ Options for <em>EbHandleBehaviour</em>:</span><br>
<span class="options">
<b>0</b>: No action is taken.<br>
<b>1</b>: The <b>Power</b> handle is returned to neutral.<br>
<b>2</b>: The <b>Reverser</b> handle is returned to neutral.<br>
<b>3</b>: Both the <b>Power</b> and the <b>Reverser</b> handle are returned to neutral.
</span><br>
This entry defines the behaviour of the Power and Reverser handles when the Emergency Brake is applied.<br>
<b><em>Note:</em></b> Requires openBVE 1.5.3.3 or higher. [Will be silently ignored in older versions]<br><br>
<br><span class="code">
<tt>#HANDLE<br>
0<br>
4<br>
8<br>
0</tt></span><br>
<br><a name="cab"></a>
<br><br>
<font size="+1" color="#0080FF">■ 11. Cab部分</font><hr>
<br>
This section defines the location of the driver's eyes inside the train.<br><img src="../Images/illustration_cab_coordinates.png" alt=""><br><br><span class="command">#CAB</span><br>
<span class="param">
This starts the section.
</span><br>
<table bgcolor="#E0E0E0" style="border:0px none;margin-left:20pt;margin-right:10pt;">
<tr><td><font color="#C00000">☀</font></td><td><em>The following spelling variations can be used:&nbsp;</em></td></tr>
<tr><td></td><td><font color="#0060C0">#CAB, #COCKPIT</font></td></tr>
</table>
<br><span class="command"><em>X</em></span><br>
<br>
A floating-point number measured in <b>millimeters</b> (mm) which gives the X-coordinate of the driver's eye from the center of the driver's car. Negative values indicate a location on the left side of the train, positive ones on the right side.<br><br><span class="command"><em>Y</em></span><br>
<br>
A floating-point number measured in <b>millimeters</b> (mm) which gives the Y-coordinate of the driver's eye from the top of the rails. Negative values indicate a location below the top of the rails, positive ones above the top of the rails.<br><br><span class="command"><em>Z</em></span><br>
<br>
A floating-point number measured in <b>millimeters</b> (mm) which gives the Z-coordinate of the driver's eye from the front of the driver's car. Negative values indicate a location inside the car, positive ones outside.<br><br><span class="command"><em>DriverCar</em></span><br>
<br>
A non-negative integer indicating which car the driver is located in. The first car in the train has index 0, the second car index 1, and so on.<br><br><span class="code">
<tt>#CAB<br>
-900<br>
2750<br>
-1000<br>
0</tt></span><br>
<br><a name="car"></a>
<br><br>
<font size="+1" color="#0080FF">■ 12. Car部分</font><hr>
<br>
This section defines the number of cars and their masses.<br><br><span class="command">#CAR</span><br>
<span class="param">
This starts the section.
</span><br>
<br><span class="command"><em>MotorCarMass</em></span><br>
<br>
A positive floating-point number measured in <b>metric tons</b> (1000 kg) indicating the mass of a single motor car.<br><br><span class="command"><em>NumberOfMotorCars</em></span><br>
<br>
A positive integer indicating how many motor cars are available in the train. Only these cars will provide acceleration.<br><br><span class="command"><em>TrailerCarMass</em></span><br>
<br>
A positive floating-point number measured in <b>metric tons</b> (1000 kg) indicating the mass of a single trailer car. If <em>NumberOfTrailerCars</em> is set to 0, this value will be ignored.<br><br><span class="command"><em>NumberOfTrailerCars</em></span><br>
<br>
A non-negative integer indicating how many trailer cars are available in the train. These cars are unpowered and thus, they do not contribute to accelerating the train. If <em>FrontCarIsAMotorCar</em> is set to <em>0</em>, this value is required to be at least 1.<br><br><span class="command"><em>LengthOfACar</em></span><br>
<br>
A positive floating-point number measured in <b>meters</b> (m) indicating the length of a car. The number is applied for all the cars in the train, however, this can be overridden by the use of the <b>extensions.cfg</b> file.<br><br><span class="command"><em>FrontCarIsAMotorCar</em></span><br>
<br>
<span class="selectable">▸ Options for <em>FrontCarIsAMotorCar</em>:</span><br>
<span class="options">
<b>0</b>: The front car is not a motor car, but a trailer car. This is the default value.<br>
<b>1</b>: The front car is a motor car.
</span><br>
Basically, you cannot influence which cars are motor cars and which are trailer cars. However, you can decide on whether the front car (where the driver is located) is a motor car or not, which this entry defines. There is a number of simple setups where the assignment of motor and trailer cars is well defined:<br><br>
<table style="border-collapse: collapse;">
<tr><th bgcolor="#D0D0D0" style=" border: 2px; border-style: ridge; padding: 4px;">NumberOfMotorCars</th><th bgcolor="#D0D0D0" style=" border: 2px; border-style: ridge; padding: 4px;">NumberOfTrailerCars</th><th bgcolor="#D0D0D0" style=" border: 2px; border-style: ridge; padding: 4px;">FrontCarIsAMotorCar</th><th bgcolor="#D0D0D0" style=" border: 2px; border-style: ridge; padding: 4px;">Effect</th></tr>
<tr><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">1</td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">0</td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">1</td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">There is only one car, and it's a motor car.</td></tr>
<tr><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">1</td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;"><em>n</em></td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">0</td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">The rear car is a motor car. All other cars (including the front car) are trailer cars. This corresponds to a locomotive pushing the train from behind.</td></tr>
<tr><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">1</td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;"><em>n</em></td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">1</td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">The front car is a motor car. All other cars are trailer cars. This corresponds to a locomotive pulling the train from the front.</td></tr>
<tr><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">2</td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">0</td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">1</td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">There are two cars and both are motor cars.</td></tr>
<tr><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">2</td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">1</td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">0</td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">There are three cars. The front car is a trailer car, and the other two cars are motor cars.</td></tr>
<tr><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">2</td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">1</td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">1</td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">There are three cars. The front and rear cars are motor cars, and the car in the middle is a trailer car.</td></tr>
</table><br>
In all other cases, motor cars will be uniformly distributed along the train, but the exact assignment is implementation-specific.<br><br><span class="command"><em>WidthOfACar</em></span><br>
<br>
A positive floating-point number measured in <b>meters</b> (m) indicating the width of a car. The number is applied for all the cars in the train. It is primarily used in the calculation of toppling. The default value is 2.6<br><br><span class="command"><em>HeightOfACar</em></span><br>
<br>
A positive floating-point number measured in <b>meters</b> (m) indicating the height of a car. The number is applied for all the cars in the train. The value is not currently used, but will be in the future in the calculation of side winds. The default value is 3.6.<br><br><span class="command"><em>CenterOfMassHeight</em></span><br>
<br>
A floating-point number measured in <b>meters</b> (m) indicating height above the rails at which the center of mass is located. The number is applied for all the cars in the train. The value is primarily used in the calculation of derailments. The default value is 1.6.<br><br><span class="command"><em>ExposedFrontalArea</em></span><br>
<br>
A positive floating-point number measured in <b>square meters</b> (m²) indicating the frontal area of a car when it is fully exposed to resisting air. This is the case when the car is the front car and the train is driving forward, or the rear car when the train is driving backward. The number is applied to all the cars in the train. The value is primarily used in the calculation of air resistance. Trains usually have a lower frontal area than <em>WidthOfACar</em> * <em>HeightOfACar</em> due to the front being rounded. This is especially true for aerodynamically enhanced trains like Shinkansen. The default value is 0.6 * <em>WidthOfACar</em> * <em>HeightOfACar</em>.<br><br><span class="command"><em>UnexposedFrontalArea</em></span><br>
<br>
A positive floating-point number measured in <b>square meters</b> (m²) indicating the frontal area of a car when it is not fully exposed to resisting air. This is the case when the car is in the middle of the train and thus surrounded by other cars. The number is applied to all the cars in the train. The value is primarily used in the calculation of air resistance. The default value is 0.2 * <em>WidthOfACar</em> * <em>HeightOfACar</em>.<br><br><span class="code">
<tt>#CAR<br>
42<br>
4<br>
36<br>
2<br>
20<br>
0<br>
2.3<br>
3.4<br>
2.6<br>
7.5<br>
1.8</tt></span><br>
<br><a name="device"></a>
<br><br>
<font size="+1" color="#0080FF">■ 13. Device部分</font><hr>
<br>
This section defines which devices are present on the train.<br><br><span class="command">#DEVICE</span><br>
<span class="param">
This starts the section.
</span><br>
<br><span class="command"><em>Ats</em></span><br>
<br>
<span class="selectable">▸ Options for <em>Ats</em>:</span><br>
<span class="options">
<b>-1</b>: Neither ATS-SN, nor ATS-P are available.<br>
<b>0</b>: ATS-SN is available, but ATS-P is not available.<br>
<b>1</b>: ATS-SN and ATS-P are available.
</span><br>
This entry defines which of the default Japanese security systems ATS-SN or ATS-P are available. If the ats.cfg is used, this entry may be without effect depending on the plugin.<br><br><span class="command"><em>Atc</em></span><br>
<br>
<span class="selectable">▸ Options for <em>Atc</em>:</span><br>
<span class="options">
<b>0</b>: ATC is not available.<br>
<b>1</b>: ATC is available but requires manual activation.<br>
<b>2</b>: ATC is available and will automatically activate once transmitting.
</span><br>
This entry defines whether the default Japanese security system ATC is available or not. If available, the user needs to manually activate ATC (<b>1</b>), or the system will automatically activate (<b>2</b>) once the ATC data is transmitting, depending on the setting of <em>Atc</em>. If the ats.cfg is used, this entry may be without effect depending on the plugin.<br><br><span class="command"><em>Eb</em></span><br>
<br>
<span class="selectable">▸ Options for <em>Eb</em>:</span><br>
<span class="options">
<b>0</b>: The EB device is not available.<br>
<b>1</b>: The EB device is available.
</span><br>
This entry defines whether the EB device (alerter, or dead-man's vigilance device) is available or not. If available and the driver does not touch any of the control for 60 seconds, an alarm goes off which needs to be canceled within 5 seconds, or otherwise, an emergency brake application will be performed. If the ats.cfg is used, this entry may be without effect depending on the plugin.<br><br><span class="command"><em>ConstSpeed</em></span><br>
<br>
<span class="selectable">▸ Options for <em>ConstSpeed</em>:</span><br>
<span class="options">
<b>0</b>: The constant speed device is not available.<br>
<b>1</b>: The constant speed device is available.
</span><br>
This entry defines whether the constant speed device is available or not. If available, the driver can order to hold the current speed at any time. The device will increase power to hold the current speed despite of inclines and resistances which would normally slow down the train if the power handle was set to neutral. However, the constant speed device will not reduce the speed or even brake on downward gradients.<br><br><span class="command"><em>HoldBrake</em></span><br>
<br>
<span class="selectable">▸ Options for <em>HoldBrake</em>:</span><br>
<span class="options">
<b>0</b>: The hold brake device is not available.<br>
<b>1</b>: The hold brake device is available.
</span><br>
This entry defines whether the hold brake device is available or not. If available, the driver can activate the hold brake, which applies the brakes to hold the current speed on a downward gradient.<br><br><span class="command"><em>ReAdhesionDevice</em></span><br>
<br>
<span class="selectable">▸ Options for <em>ReAdhesionDevice</em>:</span><br>
<span class="options">
<b>-1</b>: A readhesion device is not available.<br>
<b>0</b>: The readhesion device type A is used.<br>
<b>1</b>: The readhesion device type B is used.<br>
<b>2</b>: The readhesion device type C is used.<br>
<b>3</b>: The readhesion device type D is used.
</span><br>
This entry defines the type of readhesion device to be used. The device tests in certain intervals (reduce interval) whether wheel slip occurs. If so, it reduces the motor output by a certain amount (reduce amount) until the wheels regain adhesion. In certain intervals (increase interval), the device increases the motor output back to normal by a certain amount (increase amount) in order to see whether wheel slip would occur again or not. There are four different types available:<br><br>
<table style="border-collapse: collapse;">
<tr><th bgcolor="#D0D0D0" style=" border: 2px; border-style: ridge; padding: 4px;">Type</th><th bgcolor="#D0D0D0" style=" border: 2px; border-style: ridge; padding: 4px;">Reduce interval</th><th bgcolor="#D0D0D0" style=" border: 2px; border-style: ridge; padding: 4px;">Reduce amount</th><th bgcolor="#D0D0D0" style=" border: 2px; border-style: ridge; padding: 4px;">Increase interval</th><th bgcolor="#D0D0D0" style=" border: 2px; border-style: ridge; padding: 4px;">Increase amount</th><th bgcolor="#D0D0D0" style=" border: 2px; border-style: ridge; padding: 4px;">Characteristics</th></tr>
<tr><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">A</td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">high</td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">instantly zero</td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">medium</td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">very high</td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">Cuts off power instantly and rebuilds it up fast in steps.</td></tr>
<tr><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">B</td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">medium</td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">small</td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">high</td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">small</td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">Updates not so often and adapts slowly. Wheel slip can persist longer and power is regained slower. The behavior is smoother.</td></tr>
<tr><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">C</td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">medium</td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">medium</td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">medium</td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">medium</td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">The behavior is somewhere in-between type B and type D.</td></tr>
<tr><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">D</td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">small</td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">high</td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">small</td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">high</td><td bgcolor="#FFFFFF" style=" border: 2px; border-style: ridge; padding: 4px;">Updates fast and adapts fast. Wheel slip only occurs briefly and power is regained fast. The behavior is more abrupt.</td></tr>
</table><br>
<span class="commandlegacy"><em>LoadCompensatingDevice</em></span><br>
<span class="param">
<em>This entry is not used by openBVE.</em>
</span><br>
<br><span class="command"><em>PassAlarm</em></span><br>
<br>
<span class="selectable">▸ Options for <em>PassAlarm</em>:</span><br>
<span class="options">
<b>0</b>: The pass alarm device is not available.<br>
<b>1</b>: The pass alarm device is available and plays a single time.<br>
<b>2</b>: The pass alarm device is available and plays in a loop.
</span><br>
This entry defines whether the pass alarm device is available or not. If available, the <b>halt.wav</b> located inside the train folder will be played a single time (<b>1</b>) at around 400 m from the beginning of the station, or in a loop (<b>2</b>) until the train opens the doors at the station.<br><br><span class="command"><em>DoorOpenMode</em></span><br>
<br>
<span class="selectable">▸ Options for <em>DoorOpenMode</em>:</span><br>
<span class="options">
<b>0</b>: The doors are opened automatically, but can also be prematurely opened manually. This is the default.<br>
<b>1</b>: The doors are opened automatically. Manual override is not possible.<br>
<b>2</b>: The doors can only be opened manually.
</span><br>
<br><span class="command"><em>DoorCloseMode</em></span><br>
<br>
<span class="selectable">▸ Options for <em>DoorCloseMode</em>:</span><br>
<span class="options">
<b>0</b>: The doors are closed automatically, but can also be prematurely closed manually. This is the default.<br>
<b>1</b>: The doors are closed automatically. Manual override is not possible.<br>
<b>2</b>: The doors can only be closed manually.
</span><br>
<br><span class="code">
<tt>#DEVICE<br>
1<br>
0<br>
1<br>
0<br>
0<br>
2<br>
0<br>
1<br>
2<br>
2</tt></span><br>
<br><a name="motor"></a>
<br><br>
<font size="+1" color="#0080FF">■ 14. Motor部分</font><hr>
<br>
These sections define which sounds to play at a given speed for the electric motor and eletric brake, along with associated pitch and volume at that speed. There are four sections called #MOTOR_P1, #MOTOR_P2, #MOTOR_B1 and MOTOR_B2 that control the behavior.<br><br>The #MOTOR_P1 and #MOTOR_P2 sections define two independent sounds that can be played at a given time for the electric motor. The #MOTOR_B1 and #MOTOR_B2 sections define two independent sounds that can be played at a given time for the electric brake.<br><br>Each section starts with a corresponding #MOTOR_<em>Xi</em> line:<br><br><span class="command">#MOTOR_<em>Xi</em></span><br>
<br>
<br>The following entries define the sounds that are to be played at multiples of 0.2 km/h. The first entry corresponds to a speed of 0 km/h, the second entry to a speed of 0.2 km/h, the third entry to a speed of 0.4 km/h, and so on. There can be as many entries as desired. For example, with 800 entries, the 800<sup>th</sup> entry corresponds to a speed of 159.8 km/h. If the train travels at a higher speed than corresponding to the last entry, this last entry also takes effect for all higher speeds.<br><br>An entry inside any of the #MOTOR_<em>Xi</em> sections has the following form:<br><br><span class="command"><em>SoundIndex</em>, <em>Pitch</em>, <em>Volume</em></span><br>
<br>
<em><b>SoundIndex</b></em>: A non-negative integer corresponding to the Motor<em>SoundIndex</em>.wav file that is to be played (default sounds), or the <em>SoundIndex</em>=<em>FileName</em> setting in the [Motor] section of the sound.cfg file. <em>SoundIndex</em> may also be -1 in order to indicate that no sound should be played. The default value is -1.<br><br><em><b>Pitch</b></em>: A positive floating-point number representing the pitch of the sound in percent. A value of 100 represents an unaltered sound, a value of 200 represents a sound that is played at double speed, a value of 50 represents a sound that is played at half the original speed, and so on. You should avoid values near zero. The default value is 100.<br><br><em><b>Volume</b></em>: A non-negative floating-point number representing the volume of the sound. Nominal volume corresponds to a value of 128. The scale of volume is non-linear, and the exact behavior is implementation-specific. The default value is 128.<br><br>Please note that the final volume is proportional to the acceleration/deceleration provided by the train. This means that if the motor only outputs a fraction of its maximum acceleration, the final volume of the motor sounds will be reduced. Likewise, if the electric brake only outputs a fraction of its maximum deceleration, the final volume of the electric brake sounds will also be reduced.<br><br><span class="code">
<tt>#MOTOR_P1<br>
-1,100,36<br>
0,100,36<br>
0,100,35<br>
0,100,35<br>
0,100,34<br>
0,100,34<br>
0,100,33<br>
0,100,33<br>
0,100,32<br>
0,100,32</tt></span><br>

</body>

<!-- Mirrored from www.trainsimframework.org/develop/train_train_dat.html by HTTrack Website Copier/3.x [XR&CO'2010], Sat, 05 May 2012 22:31:07 GMT -->
</html>
